<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NANGMI - Gestión de Proyectos</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Librerías para gráficos y PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <!-- Autenticación mejorada -->
    <section id="authSection" class="auth-container">
        <!-- Login -->
        <div id="loginForm" class="auth-form animate__animated animate__fadeIn">
            <div class="auth-header">
                <img src="assets/logo.jpeg" alt="Logo" class="logo">
                <h2>Iniciar Sesión</h2>
            </div>
            <form id="loginForm">
                <input type="email" id="email" placeholder="Correo electrónico" required>
                <input type="password" id="password" placeholder="Contraseña" required>
                <button type="submit" class="btn-auth">Entrar</button>
            </form>
            <div class="auth-footer">
                <p>¿No tienes cuenta? <a href="#" id="showRegister">Regístrate</a></p>
            </div>
        </div>

        <!-- Registro -->
        <div id="registerForm" class="auth-form hidden animate__animated animate__fadeIn">
            <div class="auth-header">
                <img src="assets/logo.jpeg" alt="Logo" class="logo">
                <h2>Crear Cuenta</h2>
            </div>
            <form id="registerForm">
                <input type="text" id="name" placeholder="Nombre completo" required>
                <input type="email" id="newEmail" placeholder="Correo electrónico" required>
                <input type="password" id="newPassword" placeholder="Contraseña" required>
                <input type="password" id="confirmPassword" placeholder="Confirmar contraseña" required>
                <button type="submit" class="btn-auth">Registrarse</button>
            </form>
            <div class="auth-footer">
                <p>¿Ya tienes cuenta? <a href="#" id="showLogin">Inicia sesión</a></p>
            </div>
        </div>
    </section>

    <!-- Sección de Presupuesto -->
    <section id="presupuestoSection" class="container hidden">
        <header class="top-bar">
            <div class="logo-container">
                <img src="assets/logo.jpeg" alt="Logo" class="logo small-logo">
                <span>Cargar presupuesto</span>
            </div>
            <div class="user-menu">
                <button class="menu-button" id="userBtn"><i class="fas fa-user"></i></button>
                <button class="menu-button" id="menuBtn"><i class="fas fa-ellipsis-v"></i></button>
                <div id="dropdownMenu" class="dropdown">
                    <a href="#" id="analisisLink">Análisis</a>
                    <a href="#" id="reportesLink">Reportes</a>
                    <a href="#" id="aboutLink">Sobre Nosotros</a>
                    <a href="#" id="logoutLink">Cerrar sesión</a>
                </div>
            </div>
        </header>

        <main class="content">
            <h1>Cargar presupuesto</h1>
            <div class="button-group">
                <button class="download-btn" id="downloadTemplate">Descargar plantilla</button>
                <label for="excelInput" class="upload-btn">
                    Subir archivo Excel
                </label>
                <input type="file" id="excelInput" accept=".xlsx,.xls" hidden>
                <button class="google-btn" id="googleSheetsBtn">Conectar Google Sheets</button>
            </div>
            <button class="generate-btn" id="generateAnalysisFromSheets">Generar análisis</button>
        </main>

        <!-- Modal para Excel -->
        <div id="excelModal" class="modal">
            <div class="modal-content">
                <span class="close" id="closeModal">&times;</span>
                <div id="excelPreview" class="excel-preview table-responsive"></div>
                <button class="generate-btn" id="generateAnalysis">Generar análisis</button>
            </div>
        </div>
    </section>

    <!-- Sección de Análisis -->
    <section id="analisisSection" class="container hidden">
        <header class="top-bar">
            <div class="logo-container">
                <img src="assets/logo.jpeg" alt="Logo" class="logo small-logo">
                <span>Análisis de desviaciones</span>
            </div>
            <div class="user-menu">
                <button class="menu-button" id="userBtnAnalisis"><i class="fas fa-user"></i></button>
                <button class="menu-button" id="menuBtnAnalisis"><i class="fas fa-ellipsis-v"></i></button>
                <div id="dropdownMenuAnalisis" class="dropdown">
                    <a href="#" id="presupuestoLink">Presupuesto</a>
                    <a href="#" id="reportesLinkAnalisis">Reportes</a>
                    <a href="#" id="aboutLinkAnalisis">Sobre Nosotros</a>
                    <a href="#" id="logoutLinkAnalisis">Cerrar sesión</a>
                </div>
            </div>
        </header>

        <main class="analysis-content">
            <h1>Análisis de desviaciones de costos</h1>
            <div class="table-container">
                <table class="deviation-table">
                    <thead>
                        <tr>
                            <th>Ítem</th>
                            <th>Planificado</th>
                            <th>Real</th>
                            <th>Desviación</th>
                            <th>Sobrecosto/Ahorro</th>
                            <th>Causa</th>
                            <th>Recomendación</th>
                        </tr>
                    </thead>
                    <tbody id="analisisTableBody"></tbody>
                </table>
            </div>
            <div id="alertBox" class="alert-box"></div>
            <div class="analisis-footer">
                <button id="refreshDataBtn" class="refresh-btn">
                    <i class="fas fa-sync-alt"></i> Actualizar Datos
                </button>
            </div>
        </main>
        <button id="backBtn" class="back-btn">Volver</button>
        <button id="generateReportBtn" class="floating-btn">Generar Reporte</button>
    </section>

    <!-- Sección de Reportes -->
    <section id="reportesSection" class="container hidden">
        <header class="top-bar">
            <div class="logo-container">
                <img src="assets/logo.jpeg" alt="Logo" class="logo small-logo">
                <span>Generación de Reportes</span>
            </div>
            <div class="user-menu">
                <button class="menu-button" id="userBtnReportes"><i class="fas fa-user"></i></button>
                <button class="menu-button" id="menuBtnReportes"><i class="fas fa-ellipsis-v"></i></button>
                <div id="dropdownMenuReportes" class="dropdown">
                    <a href="#" id="presupuestoLinkReportes">Presupuesto</a>
                    <a href="#" id="analisisLinkReportes">Análisis</a>
                    <a href="#" id="aboutLinkReportes">Sobre Nosotros</a>
                    <a href="#" id="logoutLinkReportes">Cerrar sesión</a>
                </div>
            </div>
        </header>

        <main class="reportes-content">
            <h1>Generación de Reportes</h1>
            <div class="chart-container s-curve-container">
                <h2>Curva S del Proyecto</h2>
                <canvas id="sCurveChart"></canvas>
            </div>
            <div class="chart-container">
                <h2>Comparación por Partida</h2>
                <canvas id="comparacionChart"></canvas>
            </div>
            <div class="reportes-actions">
                <button id="volverBtn" class="action-btn">Volver</button>
                <button id="exportPdfBtn" class="action-btn">Exportar como PDF</button>
            </div>
        </main>
    </section>

    <!-- Modal "Sobre Nosotros" -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Sobre NANGMI</h2>
            <div class="about-tabs">
                <button class="tab-btn active" data-tab="mision">Misión</button>
                <button class="tab-btn" data-tab="equipo">Equipo</button>
                <button class="tab-btn" data-tab="contacto">Contacto</button>
            </div>
            <div class="tab-content active" id="mision">
                <p>Optimizar la gestión de proyectos mediante el control preciso de costos y desviaciones.</p>
            </div>
            <div class="tab-content" id="equipo">
                <p><strong>Equipo:</strong> [Tu nombre] y [Tu compañera]</p>
                <p><strong>Universidad:</strong> [Nombre de tu universidad]</p>
            </div>
            <div class="tab-content" id="contacto">
                <p><strong>Email:</strong> contacto@nangmi.com</p>
                <p><strong>Asesor:</strong> [Nombre de tu profesor]</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
